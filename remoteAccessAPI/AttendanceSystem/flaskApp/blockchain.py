from web3 import Web3

# Connessione a Ganache
web3 = Web3(Web3.HTTPProvider('http://localhost:7545'))
contract_abi = [{'anonymous': False, 'inputs': [{'indexed': False, 'internalType': 'string', 'name': 'operationType', 'type': 'string'}, {'indexed': False, 'internalType': 'string', 'name': 'courseName', 'type': 'string'}, {'indexed': False, 'internalType': 'string', 'name': 'additionalInfo', 'type': 'string'}, {'indexed': False, 'internalType': 'string', 'name': 'encryptedId', 'type': 'string'}], 'name': 'RecordCreated', 'type': 'event'}, {'inputs': [{'internalType': 'string', 'name': 'operationType', 'type': 'string'}, {'internalType': 'string', 'name': 'courseName', 'type': 'string'}, {'internalType': 'string', 'name': 'additionalInfo', 'type': 'string'}, {'internalType': 'string', 'name': 'encryptedId', 'type': 'string'}], 'name': 'addRecord', 'outputs': [], 'stateMutability': 'nonpayable', 'type': 'function'}, {'inputs': [{'internalType': 'string', 'name': 'courseName', 'type': 'string'}], 'name': 'countRegistrations', 'outputs': [{'internalType': 'uint256', 'name': '', 'type': 'uint256'}], 'stateMutability': 'view', 'type': 'function', 'constant': True}, {'inputs': [{'internalType': 'string', 'name': 'courseName', 'type': 'string'}, {'internalType': 'string', 'name': 'lessonName', 'type': 'string'}], 'name': 'countLessonAttendances', 'outputs': [{'internalType': 'uint256', 'name': '', 'type': 'uint256'}], 'stateMutability': 'view', 'type': 'function', 'constant': True}, {'inputs': [{'internalType': 'string', 'name': 'courseName', 'type': 'string'}, {'internalType': 'string', 'name': 'examDate', 'type': 'string'}], 'name': 'countExamParticipations', 'outputs': [{'internalType': 'uint256', 'name': '', 'type': 'uint256'}], 'stateMutability': 'view', 'type': 'function', 'constant': True}, {'inputs': [{'internalType': 'string', 'name': 'operationType', 'type': 'string'}, {'internalType': 'string', 'name': 'courseName', 'type': 'string'}, {'internalType': 'string', 'name': 'additionalInfo', 'type': 'string'}], 'name': 'getRecordsByOperation', 'outputs': [{'components': [{'internalType': 'string', 'name': 'operationType', 'type': 'string'}, {'internalType': 'string', 'name': 'courseName', 'type': 'string'}, {'internalType': 'string', 'name': 'additionalInfo', 'type': 'string'}, {'internalType': 'string', 'name': 'encryptedId', 'type': 'string'}], 'internalType': 'struct AttendanceTracker.Record[]', 'name': '', 'type': 'tuple[]'}], 'stateMutability': 'view', 'type': 'function', 'constant': True}]
contract_address = '0x5D4421c3A5D5327B012bb9564cf13fE670B1EFAD'  # Sostituisci ... con l'indirizzo effettivo del contract
contract = web3.eth.contract(address=contract_address, abi=contract_abi)